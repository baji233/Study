<!DOCTYPE html>

<html lang="en">

<head>

<meta charset="UTF-8">

<title>全国专卖店</title>

<meta name="viewport" content="width=device-width, initial-scale=1.0">

<link rel="stylesheet" href="css/bootstrap.min.css"/>

<link rel="stylesheet" href="css/style.css"/>

</head>

<style>
	.storehoving2{
		background-color: #ddd; height: 150px;text-align: center;padding-top: 20px;color: #555;
	}
	.storehoving:hover .storehoving2{
		background-color: #4E9110;
		color: white;
	}
</style>

<body>





<header id="header">

<nav class="navbar navbar-default navbar-static-top">

	<div class="container">

		<div class="navbar-header">			

			<button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1" aria-expanded="false">

			<span class="sr-only"></span>

			<span class="icon-bar"></span>

			<span class="icon-bar"></span>

			<span class="icon-bar"></span>

			</button>



			<div class="navbar-brand">

				<img src="images/logo.png" alt="" width="150px" height="" class="img-responsive"/>

			</div>

		</div>

	  	<div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1" role="navigation">	  	

			<ul class="nav navbar-nav navbar-right">

				<li><a rel="nofollow" href="index.html" class="active">网站首页</a></li>

				<li><a rel="nofollow" href="about.html">关于我们</a></li>

				<li><a rel="nofollow" href="products.html">产品中心</a></li>
				<li><a rel="nofollow" href="case.html">工程案例</a></li>

				<li><a rel="nofollow" href="news.html">新闻中心</a></li>

				<li><a rel="nofollow" href="sitemap.html">服务支持</a></li>

				<li><a rel="nofollow" href="join.html">招商加盟</a></li>

				<li><a rel="nofollow" href="contact.html">联系我们</a></li>
			</ul>

	    </div>

	</div>

</nav>

</header>



<section class="n_banner">

	<img src="images/banc.jpg" class="img-responsive" width="1855px"/>

</section>


<div id="app">
	<section class="imain">

		<div class="container">				
	
			<div class="col-md-12 col-sm-12 col-xs-12">
	
				<div class="row">
	
					<div class="crumb clearfix">
	
						<h3>全国专卖店</h3>
	
						<div class="site hidden-xs">您的当前位置：<a href="index.html">首 页</a>><a href="store.html">全国专卖店</a></div>
	
					</div>
	
					<div class="clearfix"></div>
					
	
					<div class="content">				  
	
						<div class="protext">
	
						</div>
	
						<ul class="ipro clearfix">
	
							<li class="col-md-3 col-sm-6 col-xs-12 storehoving" @click="setid(s.storeid)" v-for="(s,index) in store">
					          <div class="lar"> <a class="img" title="" rel="nofollow"> <img style="width: 370px; height: 220px;"  class="myimg" :mysrc="['images/store/'+s.mainimg]" alt="" class="img-responsive"/>
					            </a> </div>
					          <div class="storehoving2">
					      			<p style="font-size: 20px;">{{s.storename}}</p>
					      			<p>{{s.address}}</p>
					      			<p>营业时间：{{s.time}}</p>
					          </div>
					        </li>
	
						</ul>
	
						
	
						<div class="pages">
	
							<ul>
	
								<li >总页数:{{pagination.pages}}</li>

								<li  @click="last" v-show="this.pagination.currentPage>1"><a>上一页</a></li>
	
								<li class="pages_solid"><a>{{pagination.currentPage}}</a></li>
	
								<li  @click="next" v-show="this.pagination.pages>this.pagination.currentPage"><a>下一页</a></li>

								<li>到<input v-model="newpage" @keyup.enter="findpage" style="width: 35px;margin-left: 5px;margin-right: 5px;padding-left: 5px;padding-right: 5px;" value="1" type="text"/>页</li>
	
							</ul>
	
						</div>
	
						
	
					</div>			
	
				</div>
	
			</div>		
	
		</div>
	
	</section>
	
	
</div>

<footer class="footer">

	<div class="container">

		<div class="row foot_in">

			<div class="col-md-3 col-sm-12 col-xs-12 hidden-xs">

				<img src="images/ftlogo.png" alt="" class="img-responsive"/>

				<div class="tel">					

					<span>服务热线：</span>

					<p>10086</p>

				</div>

			</div>

			

			<div class="col-md-9 col-sm-12 col-xs-12">

				<ul class="footnav">

					<a href="index.html" title="网站首页" rel="nofollow">网站首页</a> | 

					<a href="about.html" title="关于我们" rel="nofollow">关于我们</a> | 

					<a href="products.html" title="产品中心" rel="nofollow">产品中心</a> | 

					<a href="case.html" title="工程案例"   rel="nofollow">工程案例</a> | 			

					<a href="news.html" title="新闻中心" rel="nofollow">新闻中心</a> | 

					<a href="sitemap.html" title="服务支持"  rel="nofollow">服务支持</a> | 

					<a href="join.html" title="招商加盟"  rel="nofollow">招商加盟</a>
					
					<a href="contact.html" title="联系我们"  rel="nofollow">联系我们</a>

				</ul>

				<div class="copyright">					

					备案号：<a href="index.html"  target="_blank" rel="nofollow"></a></p>           	

					<p>电商哪家好？供应订做多少钱？怎么样？诚信公司专业以批发价格大量现货提供cms、、、等品质优良的产品及报价，欢迎来电生产定制！</p>

					<p>地址：九华创新创业中心</p>

					<p>联系人：鑫&nbsp;&nbsp;10086</p>

					<p>网址：www.xxxx.cn&nbsp;&nbsp;邮箱：123456789@qq.com</p>
					

				</div>

			</div>	

		</div>		

	</div>			

</footer>

<script type="text/javascript" src="js/jquery.js"></script>

<script type="text/javascript" src="js/bootstrap.min.js"></script>

<script src="js/axios.min.js"></script>
<script src="js/vue.js"></script>
<script>
  function myimg(){
    var imgs=$(".myimg");
    for (let i=0;i<imgs.length;i++){
        var img_top=$(imgs[i]).offset().top;//图片距离顶部的距离
        var scro=$(window).scrollTop();//滚动的距离
        var window_height=$(window).height();//窗口的高度
        if(img_top<=(scro+window_height)){
//			console.log(111);
//           setTimeout(function (){
                $(imgs[i]).attr("src",$(imgs[i]).attr("mysrc"));
//          },100);     
        }
    }
  }
  var app=new Vue({
    el:"#app",
    created() {
		this.storeTotal();
	  	this.storeLoad();
    },
    data() {
      return {
		store:[],
		pagination: {//分页相关数据
			currentPage: 1,//当前页码
			pageSize:12,//每页显示的记录数
			total:0,
			pages:0
		},
		newpage:""
      }
    },
    methods: {
		setid(storeid){
			localStorage.setItem("storeid",storeid);
			window.location.href="store_article.html";
		},
		findpage(){
			if (this.newpage == "" || isNaN(this.newpage)) {
				this.newpage="";
			}else{
				if(this.newpage<1){
					this.newpage=1;
				}else if(this.newpage>this.pagination.pages){
					this.newpage=this.pagination.pages;
				}
				this.pagination.currentPage=this.newpage;
				this.storeLoad();
			}
		},
		last(){
			this.pagination.currentPage--;
			this.storeLoad();
		},
		next(){
			this.pagination.currentPage++;
			this.storeLoad();
		},
		storeTotal(){
			axios.get("/home/store")
			.then(res => {
				this.pagination.total=res.data.data.length;
			})
			.catch(err => {
			console.error(err); 
			})
		},
		storeLoad(){
          axios.get("/home/store?page="+this.pagination.currentPage+"&limit="+this.pagination.pageSize)
          .then(res => {
            // console.log(res)
            this.store=res.data.data;
            if(this.pagination.total%this.pagination.pageSize==0){
					this.pagination.pages=this.pagination.total/this.pagination.pageSize;
				}
				else{
					var arr=(this.pagination.total/this.pagination.pageSize).toString().split(".");
					//console.log(arr);
					this.pagination.pages=parseInt(arr[0])+1;
				}
				setTimeout(function(){
						myimg();
					},100)
          })
          .catch(err => {
            console.error(err); 
          })
        },
    },mounted(){
   		setTimeout(function(){
			myimg();
		},100)
   	}
  })
  $(document).ready(function (){
      $(window).scroll(function (){
          myimg();
      })
  })
</script>

</body>

</html>

